<div class="admin-container">
  <div class="header">
    <h1>üë• Felhaszn√°l√≥ kezel√©s</h1>
    <div class="header-actions">
      <button (click)="toggleForm()" class="btn-add">
        {{ showForm ? '‚úï Bez√°r√°s' : '+ √öj felhaszn√°l√≥' }}
      </button>
      <button (click)="goBack()" class="btn-back">‚Üê Vissza</button>
    </div>
  </div>

  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
  <div *ngIf="error" class="error-message">{{ error }}</div>

  <!-- Add/Edit Form -->
  <div *ngIf="showForm" class="form-panel">
    <h3>{{ editingId ? 'Felhaszn√°l√≥ szerkeszt√©se' : '√öj felhaszn√°l√≥ hozz√°ad√°sa' }}</h3>

    <div class="form-group">
      <label for="name">N√©v:</label>
      <input
        id="name"
        type="text"
        [(ngModel)]="formData.name"
        placeholder="Felhaszn√°l√≥ neve"
        class="form-control">
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        id="email"
        type="email"
        [(ngModel)]="formData.email"
        placeholder="user@example.com"
        class="form-control">
    </div>

    <div class="form-group">
      <label for="password">
        Jelsz√≥:
        <span *ngIf="editingId" class="optional">(hagyj √ºresen, ha nem akarod m√≥dos√≠tani)</span>
      </label>
      <input
        id="password"
        type="password"
        [(ngModel)]="formData.password"
        placeholder="Jelsz√≥ (min. 8 karakter)"
        class="form-control">
    </div>

    <div class="form-actions">
      <button (click)="saveUser()" [disabled]="loading" class="btn-save">
        {{ loading ? 'Ment√©s...' : 'Ment√©s' }}
      </button>
      <button (click)="resetForm()" [disabled]="loading" class="btn-cancel">
        M√©gsem
      </button>
    </div>
  </div>

  <!-- Users List -->
  <div *ngIf="loading && users.length === 0" class="loading">
    <p>‚è≥ Bet√∂lt√©s...</p>
  </div>

  <div *ngIf="users.length > 0 && !loading" class="users-table">
    <table>
      <thead>
        <tr>
          <th>N√©v</th>
          <th>Email</th>
          <th>Regisztr√°lva</th>
          <th>M≈±veletek</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.created_at | date: 'yyyy.MM.dd. HH:mm' }}</td>
          <td class="actions">
            <button (click)="editUser(user)" class="btn-edit">‚úèÔ∏è Szerkeszt√©s</button>
            <button
              (click)="deleteUser(user)"
              [disabled]="!canDeleteUser(user)"
              class="btn-delete">
              üóëÔ∏è T√∂rl√©s
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && users.length === 0" class="empty-state">
    <p>üì≠ Nincsenek felhaszn√°l√≥k az adatb√°zisban.</p>
  </div>
</div>
