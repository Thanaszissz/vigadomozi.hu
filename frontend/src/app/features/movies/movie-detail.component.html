<div class="page">
  <header class="topbar">
    <div class="brand">
      <img class="brand-logo" src="assets/vigado_logo_beige.png" alt="Vigad√≥ Mozi" />
    </div>
    <div class="header-right">
      <div class="search">
        <input type="text" placeholder="keresd meg. n√©zd meg. m≈±sor keres√©se" />
        <button class="search-btn">üîç</button>
      </div>
      <nav class="nav-links">
        <a routerLink="/">M≈±sor</a>
        <a routerLink="/schedule">M≈±sorlista</a>
        <a routerLink="/movies" class="active">Jegyv√°s√°rl√°s</a>
        <a routerLink="/prices">Jegy√°rak</a>
        <a routerLink="/">M√©diaaj√°nlat</a>
        <a routerLink="/admin/login" class="admin-link">üîê Admin</a>
      </nav>
    </div>
  </header>
  <section class="content">
    <div *ngIf="loading" class="state loading">
      <p>Film bet√∂lt√©se...</p>
    </div>

    <div *ngIf="error" class="state error">
      <p>{{ error }}</p>
    </div>

    <div *ngIf="movie" class="movie-detail">
      <div class="movie-header">
        <img
          *ngIf="movie.poster_path; else noPoster"
          [src]="movie.poster_path"
          [alt]="movie.title"
          class="poster-image"
        />
        <ng-template #noPoster>
          <div class="no-poster">Nincs plak√°t</div>
        </ng-template>

        <div class="info-section">
          <h1>{{ movie.title }}</h1>
          <div class="meta-info">
            <span *ngIf="movie.duration_min" class="duration">‚è±Ô∏è {{ movie.duration_min }} perc</span>
          </div>
          <p class="description">{{ movie.description }}</p>

          <div *ngIf="movie.trailer_youtube_url" class="trailer">
            <h3>Trailer</h3>
            <iframe
              [src]="getYouTubeEmbedUrl(movie.trailer_youtube_url)"
              width="100%"
              height="360"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
        </div>
      </div>

      <div class="showtimes-section">
        <h2>El√©rhet≈ë el≈ëad√°sok</h2>

        <div *ngIf="showtimes.length === 0" class="no-showtimes">
          <p>Jelenleg nincs el√©rhet≈ë el≈ëad√°s ehhez a filmhez.</p>
        </div>

        <div *ngIf="showtimes.length > 0" class="showtimes-grid">
          <div *ngFor="let showtime of showtimes" class="showtime-card">
            <div class="showtime-time">
              {{ showtime.starts_at | date: 'yyyy.MM.dd.' }}
              {{ showtime.starts_at | date: 'HH:mm' }}
            </div>
            <div class="showtime-auditorium">{{ showtime.auditorium.name }}</div>
            <a [routerLink]="'/showtimes/' + showtime.id + '/select-seats'" class="btn">Jegyek foglal√°sa</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="hero-slider">
    <h2 class="slider-title">Tov√°bbi aj√°nl√≥</h2>
    <div class="slider-window">
      <div class="slides" [style.transform]="'translateX(' + (-activeSlide * 100) + '%)'">
        <div class="slide" *ngFor="let slide of slideGroups">
          <a *ngFor="let poster of slide" [routerLink]="'/movies/' + poster.id" class="poster-link">
            <img [src]="poster.image" [alt]="poster.title" />
            <div class="poster-overlay">
              <button class="play-icon" type="button" (click)="openTrailer(poster, $event)">‚ñ∂</button>
              <div class="overlay-actions">
                <span class="overlay-link">Tov√°bbi inform√°ci√≥</span>
                <span class="overlay-btn">Id≈ëpontok</span>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="slider-controls">
      <button class="ctrl" (click)="prevSlide()">‚Äπ</button>
      <div class="dots">
        <span *ngFor="let slide of slideGroups; let i = index"
              class="dot"
              [class.active]="i === activeSlide"
              (click)="goToSlide(i)"></span>
      </div>
      <button class="ctrl" (click)="nextSlide()">‚Ä∫</button>
    </div>
  </section>

  <div class="trailer-modal" *ngIf="isTrailerOpen" (click)="closeTrailer()">
    <div class="trailer-modal-content" (click)="$event.stopPropagation()">
      <button class="trailer-close" type="button" (click)="closeTrailer()">‚úï</button>
      <h3 class="trailer-title">{{ trailerTitle }}</h3>
      <div class="trailer-frame" *ngIf="trailerUrl">
        <iframe
          [src]="trailerUrl"
          width="100%"
          height="420"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>
      <div class="trailer-footer" *ngIf="trailerMovieId">
        <div class="trailer-left">
          <img *ngIf="trailerPoster" [src]="trailerPoster" [alt]="trailerTitle" class="trailer-poster" />
          <div class="trailer-meta">
            <div class="trailer-movie-title">{{ trailerTitle }}</div>
            <div class="trailer-rating" *ngIf="trailerRating">{{ trailerRating }}</div>
          </div>
        </div>
        <a class="trailer-ticket" [routerLink]="'/movies/' + trailerMovieId">Jegyfoglal√°s</a>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-col">
      <h4>Inform√°ci√≥k</h4>
      <a href="#">H√°zirend</a>
      <a href="#">Fizet√©si t√°j√©koztat√≥</a>
      <a href="#">Adatkezel√©si t√°j√©koztat√≥</a>
    </div>
    <div class="footer-col">
      <h4>Kapcsolat</h4>
      <p>Vigad√≥ Mozi ‚Ä¢ Film √©s Sz√≠nh√°z</p>
      <p>5310 Kis√∫jsz√°ll√°s Szabads√°g T√©r 7.</p>
      <p>+36-59-328-083</p>
      <p>info&#64;vigadomozi.hu</p>
    </div>
    <div class="footer-col">
      <h4>Impresszum</h4>
      <p>Kis√∫jsz√°ll√°si M≈±vel≈ëd√©si K√∂zpont √©s K√∂nyvt√°r</p>
    </div>
  </footer>
</div>
